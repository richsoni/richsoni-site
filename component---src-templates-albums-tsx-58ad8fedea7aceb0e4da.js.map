{"version":3,"sources":["webpack:///./src/templates/albums.tsx","webpack:///./src/utils/data.ts","webpack:///./node_modules/core-js/modules/es7.array.includes.js","webpack:///./node_modules/core-js/modules/es6.string.includes.js","webpack:///./node_modules/core-js/modules/_string-context.js","webpack:///./node_modules/core-js/modules/_fails-is-regexp.js","webpack:///./src/templates/style.module.css"],"names":["__webpack_require__","r","__webpack_exports__","d","query","react__WEBPACK_IMPORTED_MODULE_0__","react__WEBPACK_IMPORTED_MODULE_0___default","n","_components_content___WEBPACK_IMPORTED_MODULE_1__","_components_Breadcrumbs___WEBPACK_IMPORTED_MODULE_2__","_components_AlbumArtwork___WEBPACK_IMPORTED_MODULE_3__","_utils_data__WEBPACK_IMPORTED_MODULE_4__","styles","require","Track","props","a","createElement","href","data","fields","url","frontmatter","title","Tracklist","tracks","songs","songsByBasename","nodesByBasename","className","map","track","song","key","_ref","album","released_on","artwork","overlay","clickable","style","backgroundImage","basename","tracklist","eventsBySong","events","edges","e","node","filter","setlist","eventsWithSetlist","reduce","memo","event","push","date","eventsWithSong","includes","collection","_Object$assign","Object","assign","$export","$includes","P","el","this","arguments","length","undefined","context","F","searchString","indexOf","isRegExp","defined","module","exports","that","NAME","TypeError","String","MATCH","KEY","re","f","wrapper"],"mappings":"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","file":"component---src-templates-albums-tsx-58ad8fedea7aceb0e4da.js","sourcesContent":["import React from \"react\";\nconst styles = require('./style.module.css');\nimport Content from '../components/content/';\nimport {Breadcrumbs} from '../components/Breadcrumbs/';\nimport {Breadcrumb} from '../components/Breadcrumbs/';\nimport AlbumArtwork from '../components/AlbumArtwork/';\nimport {nodesByBasename, NodesByBasename} from '../utils/data';\nimport { graphql } from \"gatsby\"\nimport { Songs } from '../data/songs';\nimport { AlbumNode } from '../data/albums';\n\ntype AlbumProps = {\n  data: {\n    songs: Songs,\n    album: AlbumNode\n  }\n}\n\ntype TracklistProps = {\n  songs: Songs\n  tracks?: string[]\n}\n\nconst Track = (props: any) => {\n  return <li><a href={props.data.fields.url}>{props.data.frontmatter.title}</a></li>\n}\n\nconst Tracklist = (props: TracklistProps) => {\n  const {tracks,songs} = props;\n  const songsByBasename: NodesByBasename = nodesByBasename(songs)\n  if(!tracks) { return (<div />) }\n  return <ol className='tracklist'>\n    {tracks.map((track) => {\n      const song = songsByBasename[track]\n      if(!song) { return <div /> }\n      return <Track key={track} data={song} />\n    })}\n  </ol>\n}\n\nexport default ({ data }: AlbumProps) => {\n  const album = data.album;\n  const songs = data.songs;\n  return (\n    <Content>\n      <Breadcrumbs>\n        <Breadcrumb href=\"/albums\">Albums</Breadcrumb>\n        <Breadcrumb>{album.frontmatter.title}</Breadcrumb>\n      </Breadcrumbs>\n      <h2>Release Date: {album.frontmatter.released_on}</h2>\n      <AlbumArtwork data={album} className={styles.artwork} overlay={false} clickable={false} />\n      <div style={{backgroundImage: `url(/images/releases/${album.fields.basename}.png)`}} />\n      <Tracklist songs={songs} tracks={album.frontmatter.tracklist} />\n    </Content>\n  )\n};\n\nexport const query = graphql`\n  query ($url: String!) {\n    album: markdownRemark(fields: { url: { eq: $url } }) {\n      html\n      frontmatter {\n        title\n        released_on(formatString: \"MMMM DD, YYYY\")\n        tracklist\n      }\n      fields {\n        basename\n      }\n    }\n\n    songs: allMarkdownRemark(\n      sort: { order: DESC, fields: [fields___date] }\n      filter: { fields: { relativeDirectory: {eq: \"songs\"}  }}\n      ) {\n        edges {\n          node {\n            id\n            frontmatter {\n              title\n            }\n            fields {\n              url\n              basename\n            }\n          }\n        }\n      }\n  }\n`;\n","import { AllMarkdownRemark } from '../data/remark';\nimport { GatsbyNode } from '../data/remark';\n\nexport const eventsWithSetlist = (events: any) => {\n  return events\n    .edges\n    .map((e: any) => e.node)\n    .filter((e: any) => e.frontmatter.setlist)\n}\n\nexport const eventsBySong = (events: any) => {\n  return eventsWithSetlist(events)\n  .reduce((memo: any, event: any) => {\n    (event.frontmatter.setlist || []).map((song: any) => {\n      if(!memo[song]) { memo[song] = [] }\n      memo[song].push(event.fields.date)\n    })\n    return memo\n  }, {})\n}\n\nexport const eventsWithSong = (events: any, song: any) => {\n  return events\n    .edges\n    .filter((event: any) => event.node.frontmatter.setlist)\n    .filter((event: any) => event.node.frontmatter.setlist.includes(song))\n}\n\nexport type NodesByBasename = {\n  [key: string]: GatsbyNode\n}\n\nexport const nodesByBasename = (collection: AllMarkdownRemark) => {\n  return collection.edges.map((e) => e.node).reduce((memo: NodesByBasename, node) => {\n    if(node && node.fields && node.fields.basename){\n      return {...memo, [node.fields.basename]: node}\n    } else {\n      return memo;\n    }\n  }, {})\n}\n","'use strict';\n// https://github.com/tc39/Array.prototype.includes\nvar $export = require('./_export');\nvar $includes = require('./_array-includes')(true);\n\n$export($export.P, 'Array', {\n  includes: function includes(el /* , fromIndex = 0 */) {\n    return $includes(this, el, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n\nrequire('./_add-to-unscopables')('includes');\n","// 21.1.3.7 String.prototype.includes(searchString, position = 0)\n'use strict';\nvar $export = require('./_export');\nvar context = require('./_string-context');\nvar INCLUDES = 'includes';\n\n$export($export.P + $export.F * require('./_fails-is-regexp')(INCLUDES), 'String', {\n  includes: function includes(searchString /* , position = 0 */) {\n    return !!~context(this, searchString, INCLUDES)\n      .indexOf(searchString, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n","// helper for String#{startsWith, endsWith, includes}\nvar isRegExp = require('./_is-regexp');\nvar defined = require('./_defined');\n\nmodule.exports = function (that, searchString, NAME) {\n  if (isRegExp(searchString)) throw TypeError('String#' + NAME + \" doesn't accept regex!\");\n  return String(defined(that));\n};\n","var MATCH = require('./_wks')('match');\nmodule.exports = function (KEY) {\n  var re = /./;\n  try {\n    '/./'[KEY](re);\n  } catch (e) {\n    try {\n      re[MATCH] = false;\n      return !'/./'[KEY](re);\n    } catch (f) { /* empty */ }\n  } return true;\n};\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"style-module--wrapper--aOfU0\",\"artwork\":\"style-module--artwork--2ufHx\"};"],"sourceRoot":""}