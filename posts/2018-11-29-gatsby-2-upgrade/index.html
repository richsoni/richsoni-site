<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/component---src-templates-posts-js.928c603f48ad122caa1e.css">.blog-post-body *{max-width:100%;overflow:auto}.blog-post-body{font-size:18px;line-height:26px;font-weight:400;max-width:100%;width:calc(100% - 80px);color:#1b2733;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif;overflow-wrap:break-word;word-wrap:break-word}.blog-post-body h1{margin-top:30px;margin-bottom:12px;font-size:30px;line-height:36px;word-spacing:1px;font-weight:700}.blog-post-body h2{margin-top:18px;margin-bottom:6px;font-size:21px;line-height:28px;word-spacing:.5px;font-weight:700}.blog-post-body h3{font-size:1em;font-weight:700}.blog-post-body blockquote{font-size:1rem;font-weight:400;line-height:1.5;opacity:.87;clear:both;border-left:.25em solid #80aaff;padding:10px 20px;margin:0 0 20px;font-style:italic}.blog-post-body table td:first-child,.blog-post-body table th:first-child{border-right:1px solid}.blog-post-body table th{border-bottom:1px solid}.blog-post-body td,.blog-post-body th{padding:1em}.blog-post-body code,.blog-post-body pre{font-family:SourceCodePro,monospace;font-weight:400;background-color:#f7f9fa;color:#1b2733;border:1px solid #e6e8eb;padding:4px 8px 3px;cursor:text;list-style-type:none;word-spacing:normal}.blog-post-body pre{font-size:14px;min-width:2px;line-height:20px;word-break:break-all;display:block}.blog-post-body code{z-index:0}.blog-post-body pre code{padding:0;font-size:inherit;color:inherit;white-space:pre-wrap;word-break:break-all;border:none;border-radius:0}.blog-post-body table{border-bottom-left-radius:2px;border-bottom-right-radius:2px;border-collapse:collapse;border-left-color:grey;border-right-color:grey;border-top-color:grey;border-top-left-radius:2px;border-top-right-radius:2px;box-shadow:0 1.60000002384186px 1.60000002384186px 0 rgba(0,0,0,.239216);box-sizing:border-box;color:#333;display:table;font-family:RobotoDraft,Helvetica Neue,Helvetica,Arial;font-size:16px;font-style:normal;font-variant:normal;font-weight:400;line-height:normal;margin:8px;padding:30px 25px;position:relative;text-align:start;vertical-align:top;white-space:normal}.blog-post-body aside{width:250px;float:right;margin:2em;padding:1em;background-color:#f7f7f7}.blog-post-body li,.blog-post-body ol{overflow:initial}@media (max-width:650px){.blog-post-body aside:not(.nohide){display:none}.blog-post-body aside.nohide{float:none}}.blog-post-body .caption{padding:1em}.blog-post-body .image.block{width:100%;overflow:hidden}.blog-post-body .image{background-color:#f7f7f7;padding:1em;display:flex;flex-wrap:wrap;align-items:center;justify-content:center}.style-module--artwork--2ufHx{width:400px;height:400px}.style-module--article--3TXyA{padding:2em 3em 3em;width:960px;margin:auto;display:flex;flex-flow:column nowrap;max-width:100%}.style-module--overlay--1V03_ a,.style-module--overlay--1V03_ a:hover,.style-module--overlay--1V03_ a:visited{color:#000!important;text-decoration:none}.style-module--overlay--1V03_{background-color:#fff;color:#000;position:fixed;top:58px;height:100%;overflow:hidden;z-index:3;padding-top:3em;transition-property:top;transition-duration:.5s;display:flex;width:100%;justify-content:flex-start;align-items:center;flex-direction:column}.style-module--navItem--2GWv0,.style-module--navItem--2GWv0:visited{font-size:1.5em;text-decoration:none!important;background-image:none;text-shadow:none;color:#000;width:100%;height:90px;border:1px solid #000;display:flex;align-items:center;justify-content:center}.style-module--social--2prH_{margin-top:1em;display:flex;flex-flow:row wrap}.style-module--copyright--2y2Le{font-size:.7em}.style-module--container--329_2{margin:0}.style-module--a--2DIBw,.style-module--a--2DIBw:visited{padding:10px;line-height:2.5em;text-align:center;color:#000;text-decoration:none;cursor:pointer;background:none}.hoverDim-module--hoverDim--EcLTo a{color:#000;position:relative;text-decoration:none}.hoverDim-module--hoverDim--EcLTo a:before{content:"";position:absolute;width:100%;height:3px;bottom:0;left:0;background:#000;visibility:hidden;border-radius:5px;-webkit-transform:scaleX(0);transform:scaleX(0);transition:.25s linear}.hoverDim-module--hoverDim--EcLTo>a:focus:before,.hoverDim-module--hoverDim--EcLTo>a:hover:before{visibility:visible;-webkit-transform:scaleX(1);transform:scaleX(1)}.index-module--header--26jGI{height:70px;font-size:1.5em}.index-module--navItem--xT14K,.index-module--navItem--xT14K:hover,.index-module--navItem--xT14K:visited{margin-left:1em;color:#000!important}.index-module--navItemsContainer--16JWs{background-color:#fff;justify-content:flex-end}.index-module--navItemsContainer--16JWs,.index-module--socialButtonsContainer--3JFos{position:fixed;z-index:3;display:flex;top:0;height:70px;align-items:center;transition-property:right;transition-duration:.5s;width:435;overflow:hidden}.index-module--socialButtonsContainer--3JFos{justify-content:center;posisition:fixed;whitespace:nowrap;font-size:.8em}.index-module--container--2wPjm{display:flex;position:absolute;width:100%;z-index:1;background-color:#fff;border-bottom:.0625rem solid rgba(37,39,41,.05);top:0;left:0;justify-content:center;align-items:center;height:70px}.index-module--container--2wPjm a{background-image:none;text-shadow:none}.index-module--logo200--3qSh9{display:block;width:200px;height:100px;background-image:url(/static/logo-300-ccaf244cfbddb3bd8bc2478b293c0b3a.png);background-size:contain;background-repeat:no-repeat;background-position:50%;cursor:pointer}@-webkit-keyframes pulse-module--pulse--39LUu{0%{-webkit-transform:scale(1)}50%{-webkit-transform:scale(1.1)}to{-webkit-transform:scale(1)}}@keyframes pulse-module--pulse--39LUu{0%{-webkit-transform:scale(1)}50%{-webkit-transform:scale(1.1)}to{-webkit-transform:scale(1)}}.pulse-module--pulse--39LUu:hover{-webkit-animation-name:pulse-module--pulse--39LUu;animation-name:pulse-module--pulse--39LUu;-webkit-animation-duration:.7s;animation-duration:.7s;-webkit-animation-iteration-count:4;animation-iteration-count:4}.index-module--container--1ecKf{position:fixed;font-size:1.5em;display:block;top:0;right:0;z-index:5;height:2.5em;cursor:pointer;text-decoration:none;text-shadow:none;background-image:none}.index-module--container--1ecKf a,.index-module--container--1ecKf a:hover,.index-module--container--1ecKf a:visited{color:#000!important;text-decoration:none}.style-module--footer--lKfPg{display:block;position:fixed;background-color:#fff;overflow:hidden;color:#000;width:100%;bottom:0;left:0;box-shadow:0 -3px 14px rgba(0; 0,0,.35),}.style-module--social--3LW7h{font-size:.7em}.style-module--copyright--3OONF,.style-module--social--3LW7h{display:flex;flex-flow:row nowrap;width:100%;align-items:center;justify-content:center;margin-bottom:none}.style-module--copyright--3OONF{font-size:.4em}.index-module--site--JpZyE{font-family:Helvetica Neue,HelveticaNeue,Arial,sans-serif;font-size:16px}a,a:hover,a:visited{color:#0070e0;text-decoration:none}.style-module--breadcrumbs--1rmGG{font-weight:400;font-size:40px;line-height:48px}.style-module--breadcrumb--O0EDF{font-weight:700}.style-module--breadcrumb--O0EDF:after{content:"/";color:#000;padding-left:.5em;padding-right:.5em}.style-module--breadcrumb--O0EDF:last-child:after{content:""}a.style-module--breadcrumb--O0EDF{text-decoration:none;background:none}a.style-module--breadcrumb--O0EDF:hover{text-decoration:none}</style><meta name="generator" content="Gatsby 2.0.59"/><title data-react-helmet="true"></title><link data-react-helmet="true" rel="icon" type="image/png" href="/static/favicon-d0042f69c36c282112e8a2e58576013c.png"/><link data-react-helmet="true" rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css"/><meta data-react-helmet="true" name="viewport" content="initial-scale=1"/><meta data-react-helmet="true" property="og:type" content="website"/><link as="script" rel="preload" href="/component---src-templates-posts-js-52ad18ac0e220e3b5696.js"/><link as="script" rel="preload" href="/app-5ee0339ba0940c2e8246.js"/><link as="script" rel="preload" href="/1-8aadd827710b798f58fa.js"/><link as="script" rel="preload" href="/0-69e10236f9e03848fe4e.js"/><link as="script" rel="preload" href="/webpack-runtime-deff584b27b0e2670428.js"/><link rel="preload" href="/static/d/188/path---posts-2018-11-29-gatsby-2-upgrade-ba-1-f7c-oHNk10A2PvPMzqrLOAL5rIJA1uQ.json" as="fetch" crossOrigin="use-credentials"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" role="group"><div class="index-module--site--JpZyE"><div><div></div><header class="index-module--header--26jGI"><div><nav style="right:-10000px" class="index-module--navItemsContainer--16JWs"><div class="hoverDim-module--hoverDim--EcLTo"><a class="index-module--navItem--xT14K" href="/posts">Posts</a></div><div class="hoverDim-module--hoverDim--EcLTo"><a class="index-module--navItem--xT14K" href="/albums">Albums</a></div><div class="hoverDim-module--hoverDim--EcLTo"><a class="index-module--navItem--xT14K" href="/songs">Songs</a></div><div class="hoverDim-module--hoverDim--EcLTo"><a class="index-module--navItem--xT14K" href="/events">Events</a></div></nav><nav style="right:64px" class="index-module--socialButtonsContainer--3JFos"><li class="style-module--container--329_2 hoverDim-module--hoverDim--EcLTo" style="list-style:none"><a title="spotify" href="https://open.spotify.com/artist/2ZmsHRFwH3sGTrarxwgK9O" class="style-module--a--2DIBw"><i class="fa fa-spotify"></i><span></span></a></li><li class="style-module--container--329_2 hoverDim-module--hoverDim--EcLTo" style="list-style:none"><a title="soundcloud" href="https://soundcloud.com/richsoni" class="style-module--a--2DIBw"><i class="fa fa-soundcloud"></i><span></span></a></li><li class="style-module--container--329_2 hoverDim-module--hoverDim--EcLTo" style="list-style:none"><a title="play" href="https://play.google.com/store/music/artist/i.json?id=Ap23zu5ishxv26bjhwt3z5kwx4q" class="style-module--a--2DIBw"><i class="fa fa-play"></i><span></span></a></li><li class="style-module--container--329_2 hoverDim-module--hoverDim--EcLTo" style="list-style:none"><a title="twitter" href="https://twitter.com/richsoni" class="style-module--a--2DIBw"><i class="fa fa-twitter"></i><span></span></a></li><li class="style-module--container--329_2 hoverDim-module--hoverDim--EcLTo" style="list-style:none"><a title="facebook" href="https://www.facebook.com/richsonimusic/" class="style-module--a--2DIBw"><i class="fa fa-facebook"></i><span></span></a></li><li class="style-module--container--329_2 hoverDim-module--hoverDim--EcLTo" style="list-style:none"><a title="github" href="https://github.com/richsoni" class="style-module--a--2DIBw"><i class="fa fa-github"></i><span></span></a></li><li class="style-module--container--329_2 hoverDim-module--hoverDim--EcLTo" style="list-style:none"><a title="envelope" href="http://richsoni.com/subscribe" class="style-module--a--2DIBw"><i class="fa fa-envelope"></i><span> Sign Up</span></a></li></nav></div></header><div class="index-module--container--2wPjm" style="position:fixed"><a style="text-decoration:none" class="pulse-module--pulse--39LUu" href="/"><div class="index-module--logo200--3qSh9"></div></a></div><a class="index-module--container--1ecKf"><span class="fa-stack fa-lg pulse-module--pulse--39LUu"><i style="color:black" class="fa fa-circle fa-stack-2x"></i><i class="fa fa-reorder fa-stack-1x" style="color:white;transition-property:font-size;transition-duration:.5s;font-size:1em"></i><i class="fa fa-close fa-stack-1x" style="color:white;transition-property:font-size;transition-duration:.5s;font-size:0"></i></span></a></div><div><div style="display:block;width:100%;height:70px"></div><div style="display:block;width:100%;height:0"></div></div><div class="index-module--content--3q0HM"><article class="style-module--article--3TXyA"><div class="blog-post"><div class="post-heading"><section class="style-module--breadcrumbs--1rmGG"><a class="style-module--breadcrumb--O0EDF" href="/posts">Posts</a><span class="style-module--breadcrumb--O0EDF">Upgrading richsoni.com To Gatsby 2</span></section><div style="font-style:italic;margin-bottom:1em">Posted <!-- -->11/29/2018</div></div></div><div style="background-image:url(/images/posts/gatsby-logo.jpg);width:100%;height:280px;background-size:contain;background-repeat:no-repeat;background-position:center"></div><div class="blog-post-body"><div><p>This past summer, the codebase for richsoni.com was converted from <a href="https://jekyllrb.com/">Jekyll</a> to <a href="https://gatsbyjs.org">Gatsby</a>.
A few weeks later, the Gatsby team <a href="https://www.gatsbyjs.org/blog/2018-09-17-gatsby-v2/">announced the release of Gatsby v2</a>.<br>
C'est la vie.</p>
<p>After weeks of migrating data and code from Jekyll to Gatsby, I had no interest in doing an update from Gatsby 1.9 to Gatsby 2.0.
However, my interest was piqued this week, after a few murky attempts at installing <a href="https://www.npmjs.com/package/gatsby-plugin-typescript/">gatsby-plugin-typescript</a>.
It turns out that <a href="https://www.typescriptlang.org/">Typescript</a> is bundled by default in Gatsby V2, making <a href="https://www.npmjs.com/package/gatsby-plugin-typescript/">gatsby-plugin-typescript</a> unnecessary.
This was enough reason for me to perform the update.</p>
<h1>The Update Path</h1>
<p>The update itself took a few hours, and was not too painful.
Although some changes where required, and some issues where discovered.</p>
<p>Listed on the <a href="https://www.gatsbyjs.org/blog/2018-09-17-gatsby-v2/">Gatsby V2 Announcement Page</a> was a link to a <a href="https://www.gatsbyjs.org/docs/migrating-from-v1-to-v2/">Gatsby V1 to V2 Migration Guide</a> the team put together.
During my own update, I found this article to be very helpful and informative.</p>
<p>However, in all honesty, I followed my own update strategy:</p>
<ol>
<li>Upgrade Versions</li>
<li>Fix All Yarn Errors and Warnings</li>
<li>Build</li>
<li>Fix All Build Errors and Warnings</li>
<li>Look At The Page</li>
<li>Fix All Visual Errors</li>
<li>Go Through <a href="https://www.gatsbyjs.org/docs/migrating-from-v1-to-v2/">Gatsby V1 to V2 Migration Guide</a> to make sure I did not miss anything</li>
</ol>
<p>There where some hiccups along the way, but I was able to complete the update in about 3 hours.</p>
<h1>Upgrading Versions</h1>
<p>The first thing the <a href="https://www.gatsbyjs.org/docs/migrating-from-v1-to-v2/">Gatsby V1 to V2 Migration Guide</a> recommends is <a href="https://www.gatsbyjs.org/docs/migrating-from-v1-to-v2/#update-gatsby-version">Upgrading The Gatsby Version</a>
This was my first thought as well.</p>
<h3>Step 1: Upgrade Gatsby Version</h3>
<pre><code>yarn upgrade gatsby --latest
</code></pre>
<p>After running this command, I was challenged with several errors &#x26; warnings.
They all alluded to depending on Gatsby V1 instead of V2.
To save some time, I just upgraded everything.</p>
<h3>Step 2: Just Upgrade Everything</h3>
<pre><code>yarn upgrade --latest
</code></pre>
<p>After this command, there where much less errors &#x26; warnings, but still a few.
I used <code>yarn outdated</code> and <code>yarn check</code> to investigate:</p>
<pre><code>$ yarn check
yarn check v1.10.1
error "ajv#json-schema-traverse@^0.4.1" doesn't satisfy found match of "json-schema-traverse@0.3.1"
error "regenerator-runtime" is wrong version: expected "0.11.1", got "0.10.5"
error "gatsby-plugin-pathdata#gatsby@1.x" doesn't satisfy found match of "gatsby@2.0.59"
error "gatsby#@babel/polyfill#regenerator-runtime@^0.11.1" doesn't satisfy found match of "regenerator-runtime@0.10.5"
warning "chokidar#fsevents#node-pre-gyp@^0.10.0" could be deduped from "0.10.3" to "node-pre-gyp@0.10.3"
error "ajv#json-schema-traverse" is wrong version: expected "0.4.1", got "0.3.1"
warning "eslint#ajv#json-schema-traverse@^0.3.0" could be deduped from "0.3.1" to "json-schema-traverse@0.3.1"
warning "relay-compiler#babel-polyfill#regenerator-runtime@^0.10.5" could be deduped from "0.10.5" to "regenerator-runtime@0.10.5"
error "relay-compiler#babel-runtime#regenerator-runtime@^0.11.0" doesn't satisfy found match of "regenerator-runtime@0.10.5"
warning "table#ajv#json-schema-traverse@^0.3.0" could be deduped from "0.3.1" to "json-schema-traverse@0.3.1"
info Found 4 warnings.
error Found 6 errors.
</code></pre>
<p>The only module I recognized in <code>yarn check</code>'s output was <em>gatsby-plugin-pathdata</em>.</p>
<h2>The Unmaintained <em>gatsby-plugin-pathdata</em> Library</h2>
<p>Its a developers worst nightmare:</p>
<ul>
<li><em>You are new to a framework</em></li>
<li><em>You run into a requirement not described in the 'tutorial'</em></li>
<li><em>You find only one plugin does what you need</em></li>
<li><em>You realize this plugin is not well maintained</em></li>
<li><em>You still lack the knowledge to write your own plugin</em></li>
<li><em>You reluctantly add it, hoping that there are no issues</em></li>
</ul>
<p><em>Voil√†!</em> You get something like this:</p>
<pre><code>error "gatsby-plugin-pathdata#gatsby@1.x" doesn't satisfy found match of "gatsby@2.0.59"
</code></pre>
<p>I tested the <code>gatsby develop</code> command, and it did not complain about that plugin.
At this point, I decided to put <em>gatsby-plugin-pathdata</em> off to the side.</p>
<p><strong>At the end of the migration I created an issue on the Github page for gatsby-plugin-pathdata and continued on with my life: <a href="https://github.com/barskern/gatsby-plugin-pathdata/issues/1">https://github.com/barskern/gatsby-plugin-pathdata/issues/1</a></strong></p>
<h3>First Commit</h3>
<p>Here are the changes made to the package.json (the first commit of the upgrade):</p>
<pre><code>git diff package.json
-  "gatsby": "^1.9.277",
-  "gatsby-link": "^1.6.46",
+  "gatsby": "^2.0.0",
+  "gatsby-link": "^2.0.7",

-  "gatsby-plugin-react-helmet": "^2.0.11",
-  "gatsby-plugin-typography": "^1.7.19",
-  "gatsby-source-filesystem": "^1.5.39",
-  "gatsby-transformer-remark": "^1.7.44",
-  "gatsby-transformer-yaml": "^1.5.18",
+  "gatsby-plugin-react-helmet": "^3.0.3",
+  "gatsby-source-filesystem": "^2.0.10",
+  "gatsby-transformer-remark": "^2.1.14",
+  "gatsby-transformer-yaml": "^2.1.6",
</code></pre>
<h1>Gatsby Develop</h1>
<p>The next thing I tried was to build my site with <code>gatsby develop</code>.
This produced an onslaught of errors and warnings.</p>
<h2>React</h2>
<p>The first error I saw was this:</p>
<pre><code>This dependency was not found:

* react in ./src/pages/index.js
</code></pre>
<p>I checked the <a href="https://www.gatsbyjs.org/docs/migrating-from-v1-to-v2/#manually-install-react">Gatsby V1 to V2 Migration Guide</a>, and it states:
<em>In v1, the react and react-dom packages were included as part of the gatsby package. They are now peerDependencies so you are required to install them into your project.</em></p>
<p>I added <code>react</code> <code>prop-types</code> and <code>react-dom</code>, and some errors and warnings went away.</p>
<h3>Second Commit</h3>
<pre><code>git diff package.json
+  "prop-types": "^15.6.2",
+  "react": "^16.6.3",
+  "react-dom": "^16.6.3",
</code></pre>
<h2>ESLint</h2>
<p>The next set of warnings I tackled was those which resembled this:</p>
<pre><code>Warning: React version not specified in eslint-plugin-react settings. See https://github.com/yannickcr/eslint-plugin-react#configuration.
</code></pre>
<p>I did not have ESLint installed in my project, so I was confused.
I searched quite a bit, and could find nowhere stating the ESlint was now required.
However, I simply followed the <a href="https://github.com/yannickcr/eslint-plugin-react#configuration">link from the warning</a>, which recommended adding a <code>.eslintrc</code>.
The ESlint errors went away!</p>
<h3>Third Commit</h3>
<pre><code>git diff .eslintrc
+  {
+    "extends": ["eslint:recommended", "plugin:react/recommended"]
+  }
</code></pre>
<h1>Import GraphQL</h1>
<p>With the noise from ESLint gone, I now saw a ton of <code>graphql</code> warnings:</p>
<pre><code>warning Using the global `graphql` tag is deprecated, and will not be supported in v3.
Import it instead like:  import { graphql } from 'gatsby' in file:
</code></pre>
<p>I ran a quick vim macro to update all of these:</p>
<pre><code>vim `git jump grep graphql`
VIM MACRO: qq}Oimport {graphql} from 'graphql'^C:w^M:argnext^Mq
</code></pre>
<h3>Fourth Commit</h3>
<p>This was many files, all the diffs looked like this:</p>
<pre><code>+ import { graphql } from "gatsby"
</code></pre>
<h1>BoundActionCreators</h1>
<p>After the GraphQL warnings where fixed, the only warning left was from <em>boundActionCreators</em>:</p>
<pre><code>boundActionCreators is deprecated. Please use actions instead. For migration instructions, see https://gatsby.app/boundActionCreators
Check the following files:

archive/2018-08-04/bundle.js
...
</code></pre>
<p>I did a global search in my repo for <em>boundActionCreators</em>, and replaced it with <em>actions</em> in <code>gatsby-node.js</code>.
I still saw the warning since I skipped the one in the <code>archive/</code> folder.
I skipped this file since it was not part of my Gatsby project.
But, it seemed like Gatsby was still picking that file up.</p>
<p>I did some poking around, and found an issue with Gatsby's source.
While my file was not being imported by Webpack, Gatsby was still scanning it for boundActionCreators.
I opened an issue for Gatsby: <a href="https://github.com/gatsbyjs/gatsby/issues/10211">https://github.com/gatsbyjs/gatsby/issues/10211</a></p>
<p>Since it did not break anything, I left that warning.</p>
<h3>Fifth Commit</h3>
<pre><code>diff gatsby-node.js
- exports.onCreateNode = ({ node, getNode, boundActionCreators }) => {
-  const { createNodeField } = boundActionCreators;
+ exports.onCreateNode = ({ node, getNode, actions }) => {
+  const { createNodeField } = actions;
- exports.createPages = ({ node, getNode, boundActionCreators }) => {
-  const {createPage, createRedirect } = boundActionCreators;
+ exports.createPages = ({ node, getNode, actions }) => {
+  const {createPage, createRedirect } = actions;
</code></pre>
<h1>Visit Page</h1>
<p>With <code>gatsby develop</code> was running smoothly, I loaded <a href="http://localhost:8000">http://localhost:8000</a> in my browser.
The site looked fairly functional, except that the chrome was missing (The Header and Footer).</p>
<p>I remembered seeing a section about this in <a href="https://www.gatsbyjs.org/docs/migrating-from-v1-to-v2/">Gatsby V1 to V2 Migration Guide</a>.</p>
<h2>Refactor Layout Components</h2>
<p>The guide spells out the changes that need to be made.
Since I only had one layout, and the chrome is in its own wrapper (<em>Content</em>) component it was straight forward:</p>
<ol>
<li>Move layouts/index.js to components/Layout/index.js</li>
<li>`import Layout from '../components/Layout' in <em>Content</em>, and wrap the JSX with it</li>
</ol>
<p>After this change, my navigation and footer returned.
Upon further visual inspection, all was good with my site.</p>
<h3>Sixth Commit</h3>
<pre><code>git status
D ./src/layouts
R ./src/layouts/index.js -> ./src/components/Layouts/index.js
M ./src/components/Content/index.js

git diff ./src/components/Content/index.js
+ import Layout from '../Layout'
- return &#x3C;div>
+ return &#x3C;Layout>
+   &#x3C;div>
- &#x3C;/div>
+   &#x3C;/div>
+ &#x3C;/Layout>
</code></pre>
<h1>Go Through Gatsby V1 to V2 Migration Guide</h1>
<p>Now I went through the <a href="https://www.gatsbyjs.org/docs/migrating-from-v1-to-v2/">Gatsby V1 to V2 Migration Guide</a> from start to finish.
Each section was either already complete, or not applicable except one minor improvement to the GraphQL interface.</p>
<h3>Remove Explicit GraphQL Names</h3>
<p><a href="https://www.gatsbyjs.org/docs/migrating-from-v1-to-v2/#explicit-query-names-no-longer-required">Gatsby V1 to V2 Migration Guide</a> states that explicit names are no longer required for GraphQL queries in Gatsby V2.</p>
<p>I updated all of my queries to remove the explicit name, since I am not a fan.</p>
<h3>Seventh Commit</h3>
<p>There where several files which had diffs similar to this:</p>
<pre><code>git diff
-  query ThisIsExplicitQueryName($slug: String!) {
+  query($slug: String!) {
</code></pre>
<h1>Conclusions</h1>
<p>Overall, I was pleased with the level of effort required for this upgrade.
However, my usage of Gatsby's features is not yet extensive, and I fear future upgrades.
My takeaway is to be weary of adding Gatsby Plugins.</p></div></div></article></div><div class="style-module--footer--lKfPg"><div class="style-module--social--3LW7h"><li class="style-module--container--329_2 hoverDim-module--hoverDim--EcLTo" style="list-style:none;margin-bottom:none !important"><a title="spotify" href="https://open.spotify.com/artist/2ZmsHRFwH3sGTrarxwgK9O" class="style-module--a--2DIBw"><i class="fa fa-spotify"></i><span></span></a></li><li class="style-module--container--329_2 hoverDim-module--hoverDim--EcLTo" style="list-style:none;margin-bottom:none !important"><a title="soundcloud" href="https://soundcloud.com/richsoni" class="style-module--a--2DIBw"><i class="fa fa-soundcloud"></i><span></span></a></li><li class="style-module--container--329_2 hoverDim-module--hoverDim--EcLTo" style="list-style:none;margin-bottom:none !important"><a title="play" href="https://play.google.com/store/music/artist/i.json?id=Ap23zu5ishxv26bjhwt3z5kwx4q" class="style-module--a--2DIBw"><i class="fa fa-play"></i><span></span></a></li><li class="style-module--container--329_2 hoverDim-module--hoverDim--EcLTo" style="list-style:none;margin-bottom:none !important"><a title="twitter" href="https://twitter.com/richsoni" class="style-module--a--2DIBw"><i class="fa fa-twitter"></i><span></span></a></li><li class="style-module--container--329_2 hoverDim-module--hoverDim--EcLTo" style="list-style:none;margin-bottom:none !important"><a title="facebook" href="https://www.facebook.com/richsonimusic/" class="style-module--a--2DIBw"><i class="fa fa-facebook"></i><span></span></a></li><li class="style-module--container--329_2 hoverDim-module--hoverDim--EcLTo" style="list-style:none;margin-bottom:none !important"><a title="github" href="https://github.com/richsoni" class="style-module--a--2DIBw"><i class="fa fa-github"></i><span></span></a></li><li class="style-module--container--329_2 hoverDim-module--hoverDim--EcLTo" style="list-style:none;margin-bottom:none !important"><a title="envelope" href="http://richsoni.com/subscribe" class="style-module--a--2DIBw"><i class="fa fa-envelope"></i><span> Sign Up</span></a></li></div><div class="style-module--copyright--3OONF"> Copyright <!-- -->2018<!-- --> RichSoni, LLC</div></div></div></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.page={"componentChunkName":"component---src-templates-posts-js","jsonName":"posts-2018-11-29-gatsby-2-upgrade-ba1","path":"/posts/2018-11-29-gatsby-2-upgrade/"};window.dataPath="188/path---posts-2018-11-29-gatsby-2-upgrade-ba-1-f7c-oHNk10A2PvPMzqrLOAL5rIJA1uQ";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-5ee0339ba0940c2e8246.js"],"component---src-templates-albums-js":["/component---src-templates-albums-js.fd91f68b8b0ea2bb3da5.css","/component---src-templates-albums-js-88e258c3decf763b9030.js"],"component---src-templates-events-js":["/component---src-templates-events-js.380f79e3877036aa70d1.css","/component---src-templates-events-js-0433bfbe0288ee86e97d.js"],"component---src-templates-posts-js":["/component---src-templates-posts-js.928c603f48ad122caa1e.css","/component---src-templates-posts-js-52ad18ac0e220e3b5696.js"],"component---src-templates-songs-js":["/component---src-templates-songs-js.a444dc716766895af751.css","/component---src-templates-songs-js-7254e25742d4e6f8f257.js"],"component---src-pages-albums-js":["/component---src-pages-albums-js.3af88d53103840ffd9af.css","/component---src-pages-albums-js-78e41fa128b8fb50ff33.js"],"component---src-pages-events-js":["/component---src-pages-events-js.f7c45e2558a1b4a292a5.css","/component---src-pages-events-js-d219cca7c4bb95007ac2.js"],"component---src-pages-index-js":["/component---src-pages-index-js.3dc1aea5f5075c6344f5.css","/component---src-pages-index-js-eeaf8167518b6149306e.js"],"component---src-pages-posts-js":["/component---src-pages-posts-js.27d93d6b75c697f69b81.css","/component---src-pages-posts-js-3b3b0e674030120da6a8.js"],"component---src-pages-songs-js":["/component---src-pages-songs-js.a28e81e7eb491ab7d32b.css","/component---src-pages-songs-js-22dac62e7e512b647b84.js"],"component---src-pages-subscribe-js":["/component---src-pages-subscribe-js.62012c0c32d5544628ec.css","/component---src-pages-subscribe-js-461ba8e0bda88ebc31d2.js"]};/*]]>*/</script><script src="/webpack-runtime-deff584b27b0e2670428.js" async=""></script><script src="/0-69e10236f9e03848fe4e.js" async=""></script><script src="/1-8aadd827710b798f58fa.js" async=""></script><script src="/app-5ee0339ba0940c2e8246.js" async=""></script><script src="/component---src-templates-posts-js-52ad18ac0e220e3b5696.js" async=""></script></body></html>