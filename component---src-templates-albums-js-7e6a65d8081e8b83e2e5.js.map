{"version":3,"sources":["webpack:///./src/templates/albums.js","webpack:///./src/utils/data.js","webpack:///./node_modules/core-js/modules/es7.array.includes.js","webpack:///./node_modules/core-js/modules/es6.string.includes.js","webpack:///./node_modules/core-js/modules/_string-context.js","webpack:///./node_modules/core-js/modules/_fails-is-regexp.js","webpack:///./src/templates/style.module.css"],"names":["__webpack_require__","r","__webpack_exports__","d","query","react__WEBPACK_IMPORTED_MODULE_0__","react__WEBPACK_IMPORTED_MODULE_0___default","n","_style_module_css__WEBPACK_IMPORTED_MODULE_1__","_style_module_css__WEBPACK_IMPORTED_MODULE_1___default","_components_content___WEBPACK_IMPORTED_MODULE_3__","_components_Breadcrumbs___WEBPACK_IMPORTED_MODULE_4__","_components_AlbumArtwork___WEBPACK_IMPORTED_MODULE_5__","_utils_data__WEBPACK_IMPORTED_MODULE_6__","Track","props","a","createElement","href","data","fields","url","frontmatter","title","Tracklist","tracks","songs","songsByBasename","nodesByBasename","className","map","track","key","_ref","album","released_on","styles","artwork","overlay","clickable","style","backgroundImage","basename","tracklist","eventsBySong","events","edges","e","node","filter","setlist","eventsWithSetlist","reduce","event","song","push","date","eventsWithSong","includes","collection","_Object$assign","Object","assign","$export","$includes","P","el","this","arguments","length","undefined","context","F","searchString","indexOf","isRegExp","defined","module","exports","that","NAME","TypeError","String","MATCH","KEY","re","f","wrapper"],"mappings":"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","file":"component---src-templates-albums-js-7e6a65d8081e8b83e2e5.js","sourcesContent":["import React from \"react\";\nimport styles from './style.module.css';\nimport moment from \"moment\";\nimport Content from '../components/content/';\nimport {Breadcrumbs} from '../components/Breadcrumbs/';\nimport {Breadcrumb} from '../components/Breadcrumbs/';\nimport AlbumArtwork from '../components/AlbumArtwork/';\nimport {nodesByBasename} from '../utils/data';\nimport { graphql } from \"gatsby\"\n\nconst Track = (props) => {\n  return <li><a href={props.data.fields.url}>{props.data.frontmatter.title}</a></li>\n}\n\nconst Tracklist = (props) => {\n  const {tracks,songs} = props;\n  const songsByBasename = nodesByBasename(songs)\n  return <ol className='tracklist'>\n    {tracks.map((track) => <Track key={track} data={songsByBasename[track]} />)}\n  </ol>\n}\n\nexport default ({ data }) => {\n  const album = data.album;\n  const songs = data.songs;\n  return (\n    <Content>\n      <Breadcrumbs>\n        <Breadcrumb href=\"/albums\">Albums</Breadcrumb>\n        <Breadcrumb>{album.frontmatter.title}</Breadcrumb>\n      </Breadcrumbs>\n      <h2>Release Date: {album.frontmatter.released_on}</h2>\n      <AlbumArtwork data={album} className={styles.artwork} overlay={false} clickable={false} />\n      <div style={{backgroundImage: `url(/images/releases/${album.fields.basename}.png)`}} />\n      <Tracklist songs={songs} tracks={album.frontmatter.tracklist} />\n    </Content>\n  )\n};\n\nexport const query = graphql`\n  query ($url: String!) {\n    album: markdownRemark(fields: { url: { eq: $url } }) {\n      html\n      frontmatter {\n        title\n        released_on(formatString: \"MMMM DD, YYYY\")\n        tracklist\n      }\n      fields {\n        basename\n      }\n    }\n\n    songs: allMarkdownRemark(\n      sort: { order: DESC, fields: [fields___date] }\n      filter: { fields: { relativeDirectory: {eq: \"songs\"}  }}\n      ) {\n        edges {\n          node {\n            id\n            frontmatter {\n              title\n            }\n            fields {\n              url\n              basename\n            }\n          }\n        }\n      }\n  }\n`;\n","export const eventsWithSetlist = (events) => {\n  return events\n    .edges\n    .map((e) => e.node)\n    .filter((e) => e.frontmatter.setlist)\n};\n\nexport const eventsBySong = (events, songs) => {\n  return eventsWithSetlist(events)\n  .reduce((songs, event) => {\n    (event.frontmatter.setlist || []).map((song) => {\n      if(!songs[song]) { songs[song] = [] }\n      songs[song].push(event.fields.date)\n    });\n    return songs;\n  }, {});\n}\n\nexport const eventsWithSong = (events, song) => {\n  return events\n    .edges\n    .filter((event) => event.node.frontmatter.setlist)\n    .filter((event) => event.node.frontmatter.setlist.includes(song));\n}\n\nexport const nodesByBasename = (collection) => {\n  return collection.edges.map((e) => e.node).reduce((nodesByBasename, node) => {\n    return {...nodesByBasename,\n      [node.fields.basename]: node,\n    };\n  }, {})\n};\n","'use strict';\n// https://github.com/tc39/Array.prototype.includes\nvar $export = require('./_export');\nvar $includes = require('./_array-includes')(true);\n\n$export($export.P, 'Array', {\n  includes: function includes(el /* , fromIndex = 0 */) {\n    return $includes(this, el, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n\nrequire('./_add-to-unscopables')('includes');\n","// 21.1.3.7 String.prototype.includes(searchString, position = 0)\n'use strict';\nvar $export = require('./_export');\nvar context = require('./_string-context');\nvar INCLUDES = 'includes';\n\n$export($export.P + $export.F * require('./_fails-is-regexp')(INCLUDES), 'String', {\n  includes: function includes(searchString /* , position = 0 */) {\n    return !!~context(this, searchString, INCLUDES)\n      .indexOf(searchString, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n","// helper for String#{startsWith, endsWith, includes}\nvar isRegExp = require('./_is-regexp');\nvar defined = require('./_defined');\n\nmodule.exports = function (that, searchString, NAME) {\n  if (isRegExp(searchString)) throw TypeError('String#' + NAME + \" doesn't accept regex!\");\n  return String(defined(that));\n};\n","var MATCH = require('./_wks')('match');\nmodule.exports = function (KEY) {\n  var re = /./;\n  try {\n    '/./'[KEY](re);\n  } catch (e) {\n    try {\n      re[MATCH] = false;\n      return !'/./'[KEY](re);\n    } catch (f) { /* empty */ }\n  } return true;\n};\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"style-module--wrapper--aOfU0\",\"artwork\":\"style-module--artwork--2ufHx\"};"],"sourceRoot":""}