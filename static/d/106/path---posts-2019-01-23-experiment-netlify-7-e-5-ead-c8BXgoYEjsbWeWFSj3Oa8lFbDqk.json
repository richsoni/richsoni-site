{"data":{"markdownRemark":{"html":"<p><a href=\"https://www.netlify.com/\">Netlify</a> is gaining popularity as an alternative to <a href=\"https://pages.github.com/\">Github Pages</a> for hosting static sites.\nOne of my first posts on this site, '[How I Use Github Pages to Host My Blog]' documented my experience using <a href=\"https://pages.github.com/\">Github Pages</a> to host my site.\nThat was back in 2013, and a lot has changed since then both on this site, and in technology offerings.</p>\n<p>In this post, I am going to work through launching a parallel build of my site on <a href=\"https://www.netlify.com/\">Netlify</a>.\nThis will allow me to evaluate it as an alternative to hosting via Github pages.</p>\n<h1>Initial Deploy</h1>\n<p>I followed <a href=\"https://www.netlify.com/blog/2016/09/29/a-step-by-step-guide-deploying-on-netlify/\">A Step-by-Step Guide: Deploying on Netlify</a>, which got my site up with only one small hiccup:</p>\n<h2>Cannot Resolve Module</h2>\n<p>My first builds spit out this error:</p>\n<pre><code>9:52:49 PM:   Error: ./src/pages/posts.tsx\n9:52:49 PM:   Module not found: Error: Can't resolve '../components/content/' in '/opt/build  /repo/src/pages'\n9:52:49 PM:   resolve '../components/content/' in '/opt/build/repo/src/pages'\n</code></pre>\n<p>Indeed my <code>posts.tsx</code> looked like this:</p>\n<pre><code>//./src/pages/posts.tsx\nimport Content from '../components/content/'\n</code></pre>\n<p>While the filesystem looked like this:</p>\n<pre><code>$ ls src/components/\nAlbumArtwork    FixedMenu       Logo            Table\nAlbumMediaCard  Footer          MailingListHalf Tabs\nBaseMeta        Half            MenuToggle      disqus\nBreadcrumbs     LatestRelease   OverlayMenu\nContent         Layout          ResponsiveMenu\nEventIndex      LocationMap.tsx SocialButton\n</code></pre>\n<p>Note the casing difference.  For some reason my machine allowed this casing mismatch, but Netlify did not.</p>\n<p>This issue took me a while to identify.  Here are some possible prevention tactics:\n[] Typescript: <a href=\"https://palantir.github.io/tslint/rules/file-name-casing/\">file-name-casing</a> rule would prevent, and automatically fix these issues in the future\n[] Using the <a href=\"https://github.com/netlify/build-image\">netlify-build-image</a> to develop could have identified this issue more quickly</p>\n<h1>The Site</h1>\n<p>The site is located here: <a href=\"https://vigilant-wiles-695009.netlify.com/\">https://vigilant-wiles-695009.netlify.com/</a></p>\n<h1>Developing with the netlify-build-image</h1>\n<p>It seemed valuable to <a href=\"https://github.com/netlify/build-image\">netlify-build-image</a> seemed to have a lot of benefits to me.  So, I decided to explore that option.</p>\n<h2>Setup</h2>\n<p>This also was pretty simple.  I followed the <a href=\"https://github.com/netlify/build-image#testing-locally\">Testing Locally</a> instructions, and they made sense, except for one confusing point:</p>\n<p><em>It was not clear that you had to clone the [netlify/build-image] repository</em>.</p>\n<p>I opened a Pull Request (<a href=\"https://github.com/netlify/build-image/pull/252\">https://github.com/netlify/build-image/pull/252</a>) with the tool to make the instructions more clear.\nHopefully they take the suggestions.</p>\n<h2>The Build</h2>\n<p>Since my build worked on Netlify, I expected to run <code>build yarn build</code> in the container without any issues.\nThis was inded the case:</p>\n<pre><code>~/code/github/netlify/build-image(master)------------------------------------------------------------------------\n$ ./test-tools/start-image.sh ~/code/personal/richsoni.github.io\nbuildbot@46702c0a6065:/$ build yarn build\nCloning into '/opt/buildhome/repo'...\ndone.\nInstalling dependencies\nAttempting node version '9.11.2' from .node-version\nDownloading and installing node v9.11.2...\nDownloading https://nodejs.org/dist/v9.11.2/node-v9.11.2-linux-x64.tar.xz...\nNow using node v9.11.2 (npm v5.6.0)\nStarted restoring cached node modules\nFinished restoring cached node modules\nStarted restoring cached yarn cache\nFinished restoring cached yarn cache\nInstalling yarn at version 1.3.2\nInstalling Yarn!\n> Downloading tarball...\nyarn install v1.3.2\n[1/4] Resolving packages...\n[2/4] Fetching packages...\n[3/4] Linking dependencies...\n[4/4] Building fresh packages...\nyarn run v1.3.2\n$ gatsby build\n... (gatsby doin' its thang)\nsuccess Building static HTML for pages — 2.202 s — 294/294 387.20 pages/second\ninfo Done building in 31.159 sec\nDone in 31.34s.\nCaching artifacts\nStarted saving node modules\nFinished saving node modules\nStarted saving yarn cache\nFinished saving yarn cache\nCached node version v9.11.2\n</code></pre>\n<h3>Reproducing the error</h3>\n<p>One thing to note from the README for <a href=\"https://github.com/netlify/build-image\">netlify-build-image</a> is the code to be tested needs to be committed tk.</p>","frontmatter":{"title":"Building Richsoni.com with Netlify","hero":null},"fields":{"date":"2019-01-23"}}},"pageContext":{"url":"/posts/2019-01-23-experiment-netlify/"}}